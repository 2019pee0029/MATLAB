function h = ims(matrix, cmap, newfigure)
% h = ims(matrix, cmap)
% matrix - data to image
% cmap - colormap
% newfigure - creates new figure (default)
if nargin < 3 newfigure = 1; end
    
matrixs = squeeze(matrix);
nd = ndims(matrixs);

if newfigure == 1; figure; end

switch nd
    case 2
        sd = sort(size(matrixs));
        if sd(1) == 1
            h = plot(matrixs);
        else            
            h = imagesc (matrixs);
            set (gca, 'DataAspectRatio',[1 1 1]);
            if exist ('cmap', 'var')
                if ~empty(cmap)
                    colormap(cmap);
                end
            end
        end
    case 3
        sm3 = size(matrixs,3);
        for ii=1:sm3
            h(ii) = imagesc (matrixs(:,:,ii));
            set (gca, 'DataAspectRatio',[1 1 1]);
            if exist ('cmap', 'var')
                colormap(cmap);
            end
        end
end